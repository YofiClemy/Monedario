---
layout: default
title: Roadmap
nav_order: 3
---

<section id="roadmap"></section>
<p id="fallback" hidden>
  Canâ€™t load the embedded roadmap.
  View it on GitHub:
  <a href="https://github.com/users/YofiClemy/projects/1" target="_blank" rel="noopener">Public Project</a>
</p>

<style>
:root { --brand:#08413B; }
.roadmap{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
.col{border:1px solid #e5e7eb;border-radius:12px;padding:12px;background:#fff}
.col h3{margin:0 0 8px 0;font-size:1rem;display:flex;align-items:center;gap:.5rem}
.count{background:#eef2f7;border:1px solid #e5e7eb;border-radius:999px;padding:2px 8px;font-size:.75rem}
.card{padding:10px;border:1px solid #e5e7eb;border-radius:10px;margin:8px 0;background:#fff}
.card a{color:var(--brand);text-decoration:none}
.status{font-size:.8rem;opacity:.7}
@media (prefers-color-scheme: dark){ .col,.card{background:#0b0f14;border-color:#1f2937} .count{background:#111827;border-color:#374151;color:#cbd5e1} .card a{color:#22b3a6} }
</style>

<script>
(async function(){
  const root = document.getElementById('roadmap');
  const fallback = document.getElementById('fallback');

  // Absolute URL avoids any baseurl/case issues
  const dataUrl = "https://yoficlemy.github.io/Monedario/data/roadmap.json?ts=" + Date.now();

  try {
    const res = await fetch(dataUrl, { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP ' + res.status + ' fetching ' + dataUrl);
    const data = await res.json();
    const items = Array.isArray(data.items) ? data.items : [];
    const updatedAt = data.updatedAt;

    // Normalize your statuses -> 4 columns
    function bucketName(s){
      s = (s || "").toLowerCase();
      if (s.match(/in\s*progress|now/)) return "Now / In Progress";
      if (s.match(/planned/))          return "Planned";
      if (s.match(/under\s*review|backlog/)) return "Under Review";
      if (s.match(/done|completed|shipped/))  return "Done";
      return "Planned";
    }

    const columns = ["Now / In Progress","Planned","Under Review","Done"];
    const buckets = { "Now / In Progress": [], "Planned": [], "Under Review": [], "Done": [] };
    items.forEach(it => { buckets[bucketName(it.status)].push(it); });

    // Build HTML without nested template literals
    let html = '';
    html += '<p class="status">Updated ' + new Date(updatedAt).toLocaleString() + '</p>';
    html += '<div class="roadmap">';
    columns.forEach(c => {
      html += '<div class="col">';
      html +=   '<h3>' + c + ' <span class="count">' + buckets[c].length + '</span></h3>';

      if (buckets[c].length === 0) {
        html += '<div class="status">No items yet.</div>';
      } else {
        buckets[c].forEach(it => {
          html += '<div class="card">';
          html +=   '<div><a href="' + (it.url || '#') + '" target="_blank" rel="noopener">' + (it.title || '(untitled)') + '</a></div>';
          if (it.repo)   html += '<div class="status">' + it.repo + '</div>';
          if (Array.isArray(it.labels) && it.labels.length) {
            html += '<div style="margin-top:4px">';
            it.labels.forEach(l => { html += '<span class="count">' + l + '</span> '; });
            html += '</div>';
          }
          html += '</div>';
        });
      }

      html += '</div>'; // .col
    });
    html += '</div>';   // .roadmap
    root.innerHTML = html;

  } catch (e) {
    console.error(e);
    fallback.hidden = false;
  }
})(); // <-- properly closed IIFE and </script> is below
</script>
